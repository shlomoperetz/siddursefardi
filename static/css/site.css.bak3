/* ======================================================
   Siddur Sefardi — FINAL BOOK UI (single source of truth)
   Comfortable, minimal, elegant, practical on mobile
   ====================================================== */

:root{
  --bg:#ffffff;
  --fg:#111111;
  --muted:#7a7a7a;
  --border:#e7e7e7;
  --link:#0b57d0;

  --maxw: 760px;
  --pad: 18px;

  --font: 20px;
  --line: 1.9;

  --he-font: "David Libre","Noto Serif Hebrew","Noto Sans Hebrew",serif;
  --ui-font: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;

  --topbar-h: 76px;
  --bottombar-h: 76px;
}

/* Base */
html,body{height:100%;}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:var(--he-font);
  font-size:var(--font);
  line-height:var(--line);
  text-rendering:optimizeLegibility;
  -webkit-text-size-adjust:100%;
}

a{ color:var(--link); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* Content column */
.page{
  max-width:var(--maxw);
  margin:0 auto;
  padding: calc(var(--pad) + 18px) var(--pad);
  padding-bottom: calc(var(--bottombar-h) + 46px + env(safe-area-inset-bottom));
  direction:rtl;
  unicode-bidi:plaintext;
}

/* Typography */
.page h1{
  font-size:1.65em;
  margin:0.9em 0 0.25em;
  font-weight:650;
  letter-spacing:.2px;
}
.page h2{
  font-size:1.12em;
  margin:1.4em 0 0.35em;
  font-weight:600;
  color:var(--muted);
}
.page p{ margin:0.65em 0; }
.page hr{
  border:0;
  border-top:1px solid var(--border);
  margin:1.15em 0;
}

/* ======================================================
   TOPBAR — oxygen + book-centered + finger-friendly
   ====================================================== */
header.topbar{
  position: sticky;
  top: 0;
  z-index: 200;
  height: var(--topbar-h);

  background: rgba(255,255,255,.96);
  backdrop-filter: blur(10px);

  /* ONE subtle separator only */
  border-bottom: 0;
  box-shadow: 0 1px 0 var(--border);

  /* full-width feel with centered “book” padding */
  padding-inline: max(var(--pad), calc((100vw - var(--maxw)) / 2));
  padding-block: 12px;
  box-sizing: border-box;

  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 16px;
}

header.topbar .brand{
  display:flex;
  flex-direction: column;
  gap: 4px;
  line-height: 1.1;
  text-align: right;
  font-family: var(--ui-font);
  margin-right: 6px; /* oxygen from edge */
}

header.topbar .brand .title{
  font-size: 18px;
  font-weight: 650;
  color: var(--fg);
}

header.topbar .brand .byline{
  font-size: 14px;
  color: var(--muted);
}

header.topbar .brand .byline a{
  color: inherit;
  text-decoration: none;
}
header.topbar .brand .byline a:hover{
  text-decoration: underline;
}

nav.controls{
  display:flex;
  align-items:center;
  gap: 12px;
}

nav.controls .btn{
  appearance:none;
  border:0;
  background:transparent;

  width: 48px;
  height: 48px;
  display:inline-flex;
  align-items:center;
  justify-content:center;

  font-family: var(--ui-font);
  font-size: 20px;
  font-weight: 650;
  color: var(--muted);

  border-radius: 14px;
  cursor:pointer;
}
nav.controls .btn:hover{ color: var(--fg); }
nav.controls .btn:focus-visible{
  outline:2px solid rgba(17,17,17,.25);
  outline-offset:2px;
}

/* ======================================================
   BOTTOMBAR — 3 equal thirds, bigger text, NO “double bar”
   ====================================================== */
nav.bottombar{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  z-index: 220;

  height: calc(var(--bottombar-h) + env(safe-area-inset-bottom));
  padding-top: 12px;
  padding-bottom: calc(16px + env(safe-area-inset-bottom));

  background: rgba(255,255,255,.96);
  backdrop-filter: blur(10px);

  /* ONE subtle separator only */
  border-top: 0;
  box-shadow: 0 -1px 0 var(--border);

  padding-inline: max(var(--pad), calc((100vw - var(--maxw)) / 2));
  box-sizing: border-box;

  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr;
  gap: 0;
  align-items: center; /* centers text vertically (no “stuck to bottom”) */
}

nav.bottombar a.bbtn{
  position: relative;
  height: var(--bottombar-h);

  display:flex;
  align-items:center;
  justify-content:center;

  font-family: var(--he-font);
  font-size: 21px;
  font-weight: 650;

  color: var(--muted);
  text-decoration:none;
}

nav.bottombar a.bbtn.active{
  color: var(--fg);
}

/* Active indicator: single line, inside the bar (not above separators) */
nav.bottombar a.bbtn.active::before{
  content:"";
  position:absolute;
  top: 2px;          /* inside the bar, avoids “double line” illusion */
  left: 18%;
  width: 64%;        /* visual refinement; still clearly “its third” */
  height: 2px;
  background: var(--fg);
  opacity: .9;
}

/* ======================================================
   Hide UI while reading (JS toggles body.ui-hidden)
   ====================================================== */
header.topbar, nav.bottombar{ transition: transform .18s ease; }
body.ui-hidden header.topbar{ transform: translateY(-120%); }
body.ui-hidden nav.bottombar{ transform: translateY(120%); }

/* Mobile tuning */
@media (max-width:520px){
  :root{
    --pad: 16px;
    --font: 20px;
    --topbar-h: 78px;
    --bottombar-h: 78px;
  }
  nav.bottombar a.bbtn{ font-size: 22px; }
}

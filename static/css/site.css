/* BUILD_TOKEN: 2025-12-30-1635
   Siddur Sefardi — BOOK UI (single source of truth)
   Comfortable, minimal, elegant, practical on mobile
*/

:root{
  --bg:#ffffff;
  --fg:#111111;
  --muted:#7a7a7a;
  --link:#0b57d0;

  --maxw: 760px;
  --pad: 20px;

  --font: 21px;
  --line: 1.9;

  --he-font: "David Libre","Noto Serif Hebrew","Noto Sans Hebrew",serif;
  --ui-font: system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;

  --topbar-h: 84px;
  --bottombar-h: 82px;
}

/* Base */
html,body{height:100%;}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:var(--he-font);
  font-size:var(--font);
  line-height:var(--line);
  text-rendering:optimizeLegibility;
  -webkit-text-size-adjust:100%;
}

a{ color:var(--link); text-decoration:none; }
a:hover{ text-decoration:underline; }

/* Content column */
.page{
  max-width:var(--maxw);
  margin:0 auto;
  padding: calc(var(--pad) + 18px) var(--pad);
  padding-bottom: calc(var(--bottombar-h) + 44px + env(safe-area-inset-bottom));
  direction:rtl;
  unicode-bidi:plaintext;
}

/* Headings */
.page h1{ font-size:1.75em; margin:0.9em 0 0.25em; font-weight:650; }
.page h2{ font-size:1.15em; margin:1.4em 0 0.35em; font-weight:600; color:var(--muted); }
.page p{ margin:0.65em 0; }
.page hr{ border:0; border-top:1px solid rgba(0,0,0,.08); margin:1.15em 0; }

/* ================= TOPBAR ================= */
header.topbar{
  position: sticky;
  top: 0;
  z-index: 200;
  height: var(--topbar-h);

  background: rgba(255,255,255,.96);
  backdrop-filter: blur(10px);

  /* no harsh lines */
  border: 0;

  padding-inline: max(var(--pad), calc((100vw - var(--maxw)) / 2));
  padding-block: 14px;
  box-sizing: border-box;

  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 18px;
}

/* Brand block: oxygen from right edge */
header.topbar .brand{
  display:flex;
  flex-direction: column;
  gap: 6px;
  line-height: 1.12;
  text-align: right;
  font-family: var(--ui-font);
  padding-right: 6px;
}

header.topbar .brand .title{
  font-size: 19px;
  font-weight: 650;
  color: var(--fg);
}

header.topbar .brand .byline{
  font-size: 14px;
  color: var(--muted);
}

header.topbar .brand .byline a{
  color: inherit;
  text-decoration: none;
}
header.topbar .brand .byline a:hover{ text-decoration: underline; }

/* Controls: big + separated, not glued */
nav.controls{
  display:flex;
  align-items:center;
  gap: 14px;
  padding-left: 6px;
}

nav.controls .btn{
  appearance:none;
  border:0;
  background:transparent;

  width: 54px;
  height: 54px;
  display:inline-flex;
  align-items:center;
  justify-content:center;

  font-family: var(--ui-font);
  font-size: 22px;
  font-weight: 650;
  color: var(--muted);

  border-radius: 16px;
  cursor:pointer;
}
nav.controls .btn:hover{ color: var(--fg); }
nav.controls .btn:focus-visible{
  outline:2px solid rgba(17,17,17,.25);
  outline-offset:2px;
}

/* ================= BOTTOMBAR =================
   No border/shadow (avoids “double bar”).
   Active indicator is the ONLY line.
*/
nav.bottombar{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  z-index: 220;

  height: calc(var(--bottombar-h) + env(safe-area-inset-bottom));
  padding-top: 12px;
  padding-bottom: calc(18px + env(safe-area-inset-bottom));

  background: rgba(255,255,255,.96);
  backdrop-filter: blur(10px);

  border: 0;

  padding-inline: max(var(--pad), calc((100vw - var(--maxw)) / 2));
  box-sizing: border-box;

  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr;
  gap: 0;
  align-items: center;
}

nav.bottombar a.bbtn{
  position: relative;
  height: var(--bottombar-h);

  display:flex;
  align-items:center;
  justify-content:center;

  font-family: var(--he-font);
  font-size: 23px;
  font-weight: 650;

  color: var(--muted);
  text-decoration:none;
}

nav.bottombar a.bbtn.active{
  color: var(--fg);
}

/* Active indicator: 1/3, clean */
nav.bottombar a.bbtn.active::before{
  content:"";
  position:absolute;
  top: 4px;
  left: 0;
  width: 100%;
  height: 2px;
  background: var(--fg);
  opacity: .9;
}

/* ================= Hide UI while reading =================
   Works whether class is on html or body.
*/
header.topbar, nav.bottombar{ transition: transform .18s ease; }
html.ui-hidden header.topbar,
body.ui-hidden header.topbar{ transform: translateY(-130%); }

html.ui-hidden nav.bottombar,
body.ui-hidden nav.bottombar{ transform: translateY(130%); }

/* Mobile */
@media (max-width:520px){
  :root{
    --pad: 16px;
    --font: 20px;
    --topbar-h: 88px;
    --bottombar-h: 84px;
  }
  nav.bottombar a.bbtn{ font-size: 24px; }
}
